计算机网络

## 应用层

> ##### 网络应用的体系结构：

- ###### 客户-服务器模式（client/server）

​		服务器：一直运行、固定 IP 地址和周知的端口号、扩展性差

​		客户端：主动与服务器通信、与互联网有间歇性的连接、可能是动态 IP 地址、不直接与其他客户端通信	

- ###### 对等模式（Peer To Peer）

​		每一个节点既是客户端又是服务器

​		任意端系统直接可以通信

​		参与的主机间歇连接且可以改变 IP 地址（难以管理）

​		端系统之间的主从关系是基于会话的发起端			

- ###### 混合体

​		文件搜索：集中（主机在中心服务器上注册其资源、主机向中心服务器查询资源位置）

​		文件传输：P2P（任意Peer节点之间）

​		即时通信

> #### 进程通信

 ​在同一个主机内，使用==进程间通信机制通新

不同主机，通过交换报文（Message）来通信

> #### 分布式进程通信

##### 进程标识和寻址问题

​	进程为了接收报文，必须有一个标识，即：SAP（发送也需要标识）

​	{主机：唯一的23位 IP 地址；采用的传输层协议：TCP/UDP；端口号（Port Numbers）}

​	一个进程：用 IP + Port 标示 端节点

##### 传输层提供的服务-需要穿过层间的信息

​	层间接口必须要携带的信息：

```
要传输的报文（对于本层来说：SDU）

谁传的：对方的应用进程的标示：IP+TCP(UDP)端口

传给谁：对方的应用进程的标示：对方的IP+TCP(UDP)端口号
```

​	传输层实体（tcp或者udp实体）根据这些信息进行TCP报文段（UDP数据报）的封装

```
源端口号，目标端口号，数据等

将IP地址往下交IP实体，用于封装IP数据报：源IP,目标IP
```

##### ==Socket==

```
What
可以用一个整数表示两个应用实体之间的通信关系，本地标示；

穿过层间接口的信息量最小；

TCP socket：源IP,源端口，目标IP，目标IP,目标端口

Why
如果Socket API每次传输报文，都携带如此多的信息，太繁琐易错，不便于管理。

How
用个代号标示通信的双方或者单方：socket；

就像OS打开文件返回的句柄一样（对句柄的操作，就是对文件的操作）
```

###### TCP 之上的套接字（Socket）

- TCP的套接字是4元组的一个具有本地意义的会话标示（整数）
- 4元组包括源IP/端口和目标IP/端口
- 通过socket告诉传输层报文段的端口号，告诉网络层数据包的IP值
- 同一个进程同一个端口可能具有不同的socket

###### UDP 之上的套接字（Socket）

- 每个报文都是独立传输的，前后报文可能给不同的进程
- UDP socket包括本地IP和端口
- 发送报文时，需要包含数据本身，UDP Socket和目标IP/端口

##### 应用层协议

###### 定义了运行在不同端系统上的应用程序如何互相交换报文

- 交换的报文类型
- 报文类型的语法
- 字段的语义
- 进程何时、如何发送报文及对报文进行响应的规则

###### 应用协议仅仅是应用的一个组成部分

​	Web应用：HTTP协议、web客户端、web服务器、HTML

###### 协议分类

- 公开协议：

​	由 RFC 文档定义、允许互操作，如 HTTP、SMTP

- 专用（私有）协议

​	协议不公开，如 Skype

##### 描述传输层服务

- 数据丢失率

​	有些应用则要求100%的可靠数据传输（如文件）

​	有些应用（如音频）能容忍一定比例以下的数据丢失

- 延迟

​	一些应用 出于有效性考虑，对数据传输有严格的时间限制

- 吞吐

​	一些应用（如多媒体）必须需要最小限度的吞吐，从而使得应用能够有效运转	

- 安全性

##### Internet 提供的传输层服务

- TCP服务

​	可靠的服务

​	流量控制：发送方不会淹没对方

​	拥塞控制：当网络出现拥塞时，能抑制发送方

​	不能提供的服务：时间保证、最小吞吐保证和安全

​	面向连接：要求在客户端与服务器之间建立连接

- UDP服务：

​	不可靠数据传输

​	不提供的服务：可靠、流量控制、拥塞控制、时间、带宽保证、建立连接

###### 	优势：

​	能够区分不同的进程，而 IP 服务不能

​	无需建立连接，省去了建立连接时间，适合事务型的应用

​	不做可靠性的工作，如：检错重发，适合那些对事实性能要求比较高而正确性要求不高的应用

​	没有拥塞控制和流量控制，能够按照设定的速度发送数据

##### 安全 TCP

###### TCP & UDP：

都没有加密

明文通过互联网传输，甚至密码

###### SSL（应用层）：

在 TCP 上实现，提供加密的 TCP 连接

私密性

数据完整性

端到端的鉴别

